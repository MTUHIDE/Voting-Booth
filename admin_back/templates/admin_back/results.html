{% extends 'admin_back/base.html' %}

{% block content %}

<style>
table {
  font-family: arial, sans-serif;
  border-collapse: collapse;
  width: 100%;
}

td, th {
  border: 1px solid #dddddd;
  text-align: left;
  padding: 8px;
}

tr:nth-child(even) {
  background-color: #dddddd;
}
</style>
<h2>Survey Table</h2>
    <label for="surveys">Choose a survey to see the results:</label>
    <form method= "post" name="selected">
    {% csrf_token %}
    <select name="surveys" id="surveys" onchange="document.selected.submit();">
        <option value="none" selected disabled hidden> Select an Option</option>
        {% for x in survey %}
                <option value="{{ x }}">{{ x }}</option>
        {% endfor %}
    </select>
    </form>

 <table>
     <tr>
         <th>Survey Name</th>
         <th>Question</th>
         <th>Responded Yes</th>
         <th>Responded No</th>
     </tr>
     <tr>
         {% for s in detail %}
             {%if s.survey == display or  s.survey.title == display%}
                <td>{{ s.survey }}</td>
                <td>{%if s.text != '' and s.state != null %}{{ s.text}}{% else %}Question does not exist{% endif %}</td>
                <td>{{ s.confirms }}</td>
                <td>{{ s.votes }}</td>
                </tr>
             {% endif %}
       {% endfor %}
 </table>

{% endblock %}